---
title: 隐私保护基本概念
date: 2020-09-14 09:25:19
tags: [隐私保护,SMC] 
---

本文主要介绍了隐私保护技术的基本机制和一些常见的隐私保护方法以及这些方法在机器学习领域的常见应用。隐私保护方法包括数据脱敏、数据匿名化、差分隐私、安全多方计算和同态加密，后两种方法属于密码学方法。<!--more--->

### 隐私保护机制

**数据失真**，如随机扰动、随机化回答、阻塞和微聚，主要优点是计算开销小，实现简单。主要缺点是数据失真，严重依賴于数据，不同数据需设计不同的算法。

**数据加密**，如多方安全计算（SMC）、分布式下实现隐私保护的关联规则，挖掘算法、数据匿名化算法等。实现主要优点是数据真实、无缺损，高隐私保护度。主要缺点是计算通信开销大，部署复杂，实际应用难度较高。

**数据匿名化**，如$k$-匿名，$l$-多样性。适用于各类数据、众多应用，算法通用性高能保证发布数据的真实性，适合数据共享。存在一定程度的数据缺报，存在一定程度的私泄露，实现最优化的数据匿名开销较大。

### 数据脱敏

数据脱敏顾名思义就是对敏感数据进行变形处理，其目的是保护隐私数据等信息的安全，例如机构和企业收集的个人身份信息、手机号码、银行卡信息等敏感数据。数据脱敏的基本原理是通过脱敏算法将敏感数据进行遮蔽、变形，将敏感级别降低后对外发放，或供访问使用。根据不同的使用场景可以分为“静态脱敏”和“动态脱敏”两类技术。

**静态脱敏**直接通过屏蔽、变形、替换、随机、格式保留加密（FPE）和强加密算法（如AES）等多种脱敏算法，针对不同数据类型进行数据掩码扰乱，并可将脱敏后的数据按用户需求，装载至不同环境中。静态脱敏可提供文件至文件，文件至数据库，数据库至数据库，数据库至文件等不同装载方式。导出的数据是以脱敏后的形式存储于外部存贮介质中，实际上已经改变了存储的数据内容。

**动态脱敏**通过准确的解析SQL语句匹配脱敏条件，例如：访问IP、MAC、数据库用户、客户端工具、操作系统用户、主机名、时间、影响行数等，在匹配成功后改写查询SQL或者拦截防护返回脱敏后的数据到应用端，从而实现敏感数据的脱敏。实际上存储于生产库的数据未发生任何变化。

### 数据匿名化

匿名技术的核心是通过对数据的处理使数据无法确定到具体的个人，隐匿数据中的身份信息。主要方法有泛化和抑制、分割、聚集和聚类等。常见的基于匿名技术的隐私保护策略是$k$-匿名和$l$-多样性。

**$k$-匿名(k-anonymity)** ,给定数据表 ，QI是与T相关联的准标识符，当且仅当在T(QI)中出现的每个值序列在T(QI)中至少出现K次，则T满足$k$-匿名。 T(QI)表示T表的元组在准标识符QI上的投影。$k$-匿名的核心思想就是设法切断准标识符与敏感属性之间的一对一关系来保护隐私属性。在一个数据表中，一个记录的准标识符至少有$k-1$个记录的准标识符与之相同。

**$l$-多样性**是基于降低数据表示粒度以达到匿名保护的隐私保护方法。 这种降低是一个折衷，导致数据管理或挖掘算法的有效性的一些损失，从而提高隐私保护。$l$-多样性模型是$k$-匿名模型的扩展，$k$-匿名使用泛化和抑制降低数据表示的粒度，使得任何给定的记录映射到其所在数据集上至少$k$条其他记录。具体定义为：$l$-多样性（$l$-diversity Principle）给定数据表$T(A_1,A_2,...A_n)$，QI是与T相关联的准标识符对T进行$k$-匿名处理后，每个$k$-匿名等价组中白敏感属性至少包含$l$表现良好的取值，则满足$l$-多样性。

### 差分隐私

差分隐私的任务是提供一种关于输出的概率分布的机制或者协议，允许用户对数据进行一定程度的修改，但不影响总体输出，从而使得攻击者无法知道数据集中关于个人的信息，达到隐私保护的作用。

差分隐私的定义：设有随机算法$M$, $P_M$为$M$所有可能的输出构成的集合。对于任意两个邻近数据集$D$和$D'$以及$P_M$的任何子集$S_M$, 若算法$M$满足
$$
\operatorname{Pr}\left[M(D) \in S_{M}\right] \leq \exp (\varepsilon) \times \operatorname{Pr}\left[M\left(D^{\prime}\right) \in S_{M}\right]
$$
则称算法$M$提供 ε-差分隐私保护, 其中参数ε 称为隐私保护预算.

差分隐私最主要的方法是在数据集中添加噪声来实现的，常用的噪音机制包括Laplace机制和指数机制，Laplace 机制适用于连续型数据集，而指数机制适用于离散型数据集。	

在联邦学习中，为了使各方能在各自的分散数据集上进行模型训练，可以使用本地差分隐私（Local Differential Privacy，LDP）。通过使用本地差分隐私，每个输入方将会扰乱自己的数据，然后将易混淆的数据发送至不受信任的服务器。Moments accountant算法是一种差分隐私随机梯度下降方法。该方法通过考虑特定的噪声分布，计算出神经网络模型训练的总体隐私代价。它证明了选择适当规模的噪声和分片阈值可以实现更小的隐私损失。

### 安全多方计算

安全多方计算(Secure Multi-Party Computation, SMC)是指在分布式环境下，两个或多个参与者协作计算某个函数，每个参与者输入各自私密的数据，在协议执行完成之后，所有参与者获得所希望的计算结果，而无法得知其他参与者输入信息，从而保护了参与者输入的隐私。

通常情况下，安全多方计算能够通过三种不同的框架来实现：不经意传输Oblivious Transfer,OT）、秘密共享（ Secret Sharing , SS）和同态加密（ Threshold Homomorphic Encryption,THE）。

#### **不经意传输**

**不经意传输**(又称为茫然传输，Oblivious Transfer,OT)是安全多方计算协议的一种基本方法。

**2取1不经意传输协议**：发送方Alice输入信息$m_0,m_1$，接收方Bob随机选择自己所需信息的索引号$a \in \{0,1\}$。如果Alice和Bob诚实执行协议后，Bob就能以1/2的概率得到所选择的信息$m$，但是Bob无法获得 Alice输入的所有信息且Alice无法得知Bob的选择。

n取k不经意传输协议：发送方Alice输人信息$m_0,m_1,...,m_n$接收方Bob输入其选择的索引号$a_0,a_1,...a_k \in \{0,1,..,n\}$如果Alice和Bob诚实执行协议后，Bob就能以$k/n$的概率得到$m$，但是Bob无法得到 Alice的其他信息，且Alice无法得知Bob所选择的信息。

研究者已发表了许多不经意传输的构造方法，例如 Bellare-Micali构造Naro-Pinka构造以及 Hazay-Lindell构造。

#### 秘密共享

秘密共享（也称为秘密分割方法）是指将秘密被拆分为n个碎片，且由n个不同参与者保管其中一份，且个人管的秘密没有可用性。 当有足够数量的秘密碎片就可以重建，但重构秘密的类型可能不同。秘密共享主要包括了算数秘密共享（Arithmetic secret sharing）、Shamir秘密共享和二进制秘密共享（Binary secret sharing）。多数基于安全多方计算的面向隐私保护机器学习的研究都采用了算数秘密共享。

大多数安全多方计算的隐私保护机器学习方法利用两阶段架构，包括离线阶段和在线阶段。大多数密码操作都在离线阶段执行，在离线阶段生成乘法三元组。之后，于在线阶段使离线阶段生成的乘法三元组对机器学习模型进行训练。

### 同态加密

同态加密技术(Homomorphic Encryption,HE)是指对密文进行加密计算，而产生的结果解密后与对明文进行操作后获得的结果相匹配。同态加密技术也能被用来实现安全多方计算。

假设存在加密函数$f$，使得明文$M$ 加密后变成密文$M'$，明文$N$加密后变成密文$N'$，即$f(M)=M',f(N)=N'$，存在$f$的解密函数$f^{-1}$能够将$f$加密后的密文解密成加密前的明文。将$M'$与$N'$相加得到$P'$，如果解密函数$f^{-1}$对$P'$解密后的结果等于$M$和$N$相加的结果，即$f^{-1}(P')=f^{-1}(M'+N')=M+N$，则$f$是可以进行同态加密的加密函数。

同态加密可以分为部分同态加密（Partial Homomorphic Encryption，PHE）、些许同态加密（Somewhat Homomorphic Encryption,SHE）以及全同态加密（Fully Homomorphic Encryption,FHE）。

**部分同态加密**是指加密算法只满足某种运算，满足加法的称为加法同态（Additive Homomorphism），满足乘法的称为乘法同态（Multiplication homomorphism）。常见的 RSA 算法对于乘法操作是同态的，Paillier算法则是对加法同态的。

**些许同态加密**方法指一同态加密方法中的一些运算操作（如加法和乘法）只能执行有限次。SHE方法为了安全性，使用了噪声数据，每一次在密文上的操作会增加密文上的噪声量，而乘法操作是增加噪声量的主要手段。当噪声量超过一个上限后，解密操作就不能得出正确结果了。

**全同态加密**方法允许对密文进行无限次数的加法运算和乘法运算操作。目前的FHE建立在SHE的基础上，并通过实现代价高昂的自助法（bootstrap）操作来实现。 Bootstrap操作通过执行解密、密文上的加密操作和对密钥加密来对密文进行重加密，以减少密文在后续计算中的噪声量。由于自助法的代价高昂，FHE方案十分缓慢且在实践中往往不优于传统的安全多方计算方法。

 同态加密的核心是能够直接在密文上做运算，运算结果解密后与明文运算结果相同，这是对用户隐私的最直接和有效的保护手段。在机器学习和深度学习过程中使用同态加密对数据加密然后分析计算，能够很好地解决许多领域要求数据保密、安全的问题。同态加密可以确保在密文上进行计算而不进行解密，从而解密的结果与对明文执行相同计算得到的结果相同。由于目前的同态加密方案仍然存在许多局限，如只支持整数数据，需要固定的乘法深度，不能无限期地进行加法和乘法运算，全同态加密不支持比较和取最大值等操作。因此，现有的同态加密方案不能简单地应用于机器学习以及深度学习中。目前常用的解决策略有两种：①通过安全的多方计算来构造一种适合于基于同态加密的机器学习算法的协议，并通过执行该协议来完成该算法；②寻求原始机器学习算法的近似算法，使其仍然可以使用同时不依赖交互方案，并且满足同态加密方案的数据和操作要求。

目前，利用加密技术来保护机器学习以及深度学习中的用户敏感数据已经取得较大进展，包括在预测阶段以及训练阶段的数据加密。但是在使用同态加密的过程中存在资源消耗的问题，深度学习本身已经消耗了大量的计算资源，结合同态加密技术将大大增加深度学习的计算量。如何在结合同态加密算法而尽量减少对深度学习性能的影响将是未来主要的研究方向。

