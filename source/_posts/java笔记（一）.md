---
title: java笔记 —— 存储
date: 2018-10-23 16:20:04
tags: [java,读书笔记]
---
这是读Bruce Eckel著的《thinking in JAVA》一书所做的读书笔记，我觉得我应该把我觉得一些重要的东西以及一些我还没能理解的东西记下来，以供以后学习工作所用。这一篇是这本书第二章的对象存储部分。
## java的存储方式

<!--more-->

* 寄存器 这是最快的存储区，位于处理器内部，由于寄存器的数目非常少，所以程序员不能直接控制，也不能在程序中感觉到寄存器存在的任何迹象。
* 堆栈 位于通用的RAM中，但通过堆栈指针可以从处理器那里获得直接支持。堆栈指针向下移动，分配新的内存，若向上移动，则释放那些内存，这是一种快速有效的内存分配方法，仅次于寄存器，创建程序时，java系统必须知道存储在堆栈内的所有项的确切生命周期，以便上下移动指针。这一约束限制了程序的灵活性，所以虽然某些java数据存储在堆栈中——特别是对象引用，但是java对象并不存储其中。
* 堆 一种通用的内存池（位于RAM），用于存放所有的java对象。堆与堆栈的不同在于：编译器不需要知道存储的数据在堆里存活多长时间，因此在堆里分配有很大的灵活性。当使用new的时候，会自动在堆里进行存储分配。付出的代价是：用堆进行存储和清理可能比用堆栈进行存储分配需要更多的时间。
* 常量存储 常量值通常直接存放在程序代码的内部，这样做是安全的，因为它们永远不会被改变。
* 非RAM存储 如果数据完全存活与程序之外，那么它可以不受程序的任何控制，在程序没有运行时也可以存在。其中两个基本的例子是流对象和持久化对象。流对象中，对象会转化成字节流，通常发给另一台机器。在持久化对象中，对象被存放在磁盘上，可以在程序中止后保持状态，比如说数据库。
